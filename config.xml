<?xml version="1.0" encoding="UTF-8" ?>
<widget id = "gov.dot.fhwa.birm"
        version   = "2.0.0"
        xmlns = "http://www.w3.org/ns/widgets"
        xmlns:gap = "http://phonegap.com/ns/1.0"
        xmlns:android="http://schemas.android.com/apk/res/android">

  <name>BIRM</name>
  <author href="https://www.fhwa.dot.gov/" email="NHICustomerService@dot.gov">US Department of Transportation; Federal Highway Administration</author>
  <description>BIRM Mobile Application.</description>

  <content src="index.html" />
  <access origin="*"/>

  <preference name="phonegap-version" value="cli-6.5.0" />
  <preference name="orientation" value="portrait" />
  <preference name="fullscreen" value="false" />
  <preference name="SplashScreen" value="screen" />
  <preference name="AutoHideSplashScreen" value="false" />
  <preference name="SplashScreenDelay" value="15000" />
  <preference name="SplashMaintainAspectRatio" value="true" />
  <preference name="SplashShowOnlyFirstTime" value="true" />
  <preference name="AndroidPersistentFileLocation" value="Compatibility" />
 
  

  <platform name="ios" >
    <preference name="target-device" value="universal" />
    <preference name="deployment-target" value="7.0" />
    <preference name="webviewbounce" value="true" />
    <preference name="DisallowOverscroll" value="true" />
    <preference name="disallowOverscroll" value="true" />
    <preference name="prerendered-icon" value="true" />
    <preference name="stay-in-webview" value="false" />
    <preference name="ios-statusbarstyle" value="black-opaque" />
    <preference name="EnableViewportScale" value="true"/>
    <preference name="detect-data-types" value="true" />
    <preference name="exit-on-suspend" value="false" />
    <preference name="show-splash-screen-spinner" value="true" />
    <preference name="disable-cursor" value="false" />
    <preference name="StatusBarOverlaysWebView" value="false" />
  </platform>

  <platform name="android" >
    <preference name="android-minSdkVersion" value="19" />
   
  </platform>

  <plugin name="cordova-plugin-device" spec="1.1.2" />
  <plugin name="cordova-plugin-dialogs" spec="~1.3.0" />
  <plugin name="cordova-plugin-file" spec="4.2.0" />
  <!--<plugin name="cordova-plugin-file" spec="~4.3.1" />-->
  <plugin name="cordova-plugin-file-transfer" spec="1.5.1" />
  <plugin name="cordova-plugin-inappbrowser" spec="1.4.0" />
  <plugin name="cordova-plugin-network-information" spec="1.2.1" />
  <plugin name="cordova-plugin-media" spec="2.3.0" />
  <plugin name="cordova-plugin-splashscreen" spec="3.2.2" />
  <!-- Handles the status bar overlay issues in iOS 7 and 8 -->
  <plugin name="cordova-plugin-statusbar" spec="2.1.3" />
  <plugin name="cordova-plugin-filepath" spec="1.0.2" />
  
 
  <!-- Email plugin for sending notes attachements -->
  <plugin name="cordova-plugin-email" source="npm" />
  <!--<plugin name="cordova-plugin-email" version="1.1.0" />-->
  <!--<plugin spec="https://github.com/EddyVerbruggen/SocialSharing-PhoneGap-Plugin.git" source="git" />-->
  
  <!-- WebIntent plugin for trapping Intents for things such as clicking on email attachemtns -->
  <!--<plugin name="net.tunts.webintent" version="0.2.1" />-->
  <plugin spec="https://github.com/Tunts/WebIntent.git" source="git" />
  
  <!-- Plugin for URL Schema's -->
  <!--<plugin name="nl.x-services.plugins.launchmyapp" version="3.2.0">-->
  <plugin name="cordova-plugin-customurlscheme" version="4.1.5">
    <param name="URL_SCHEME" value="birm" />
  </plugin>

  <!-- Screen Orientation Plugin -->
  <!--<plugin name="cordova-plugin-screen-orientation" spec="1.3.1" />-->
  <plugin spec="https://github.com/gbenvenuti/cordova-plugin-screen-orientation.git" source="git" />
              
  <!-- Default Icon -->
  <icon src="images/Icons/icon.png" />

  <!-- Default Icon -->
  <splash src="images/Splash/splash.png" />

  <!-- Android App Launch Icons -->
  <icon src="res/icon/android/ldpi.png" platform="android" density="ldpi" />
  <icon src="res/icon/android/mdpi.png" platform="android" density="mdpi" />
  <icon src="res/icon/android/hdpi.png" platform="android" density="hdpi" />
  <icon src="res/icon/android/xhdpi.png" platform="android" density="xhdpi" />
  <icon src="res/icon/android/xxhdpi.png" platform="android" density="xxhdpi" />
  <icon src="res/icon/android/xxxhdpi.png" platform="android" density="xxxhdpi" />
  
  <!-- Android Splash Pages -->
  <splash src="res/screen/android/screen-ldpi-portrait.png" platform="android" density="ldpi" />
  <!--<splash src="res/screen/android/screen-ldpi-landscape.png" platform="android" density="land-ldpi" />-->
  <splash src="res/screen/android/screen-mdpi-portrait.png" platform="android" density="mdpi" />
  <!--<splash src="res/screen/android/screen-mdpi-landscape.png" platform="android" density="land-mdpi" />-->
  <splash src="res/screen/android/screen-hdpi-portrait.png" platform="android" density="hdpi" />
  <!--<splash src="res/screen/android/screen-hdpi-landscape.png" platform="android" density="land-hdpi" />-->
  <splash src="res/screen/android/screen-xhdpi-portrait.png" platform="android" density="xhdpi" />
  <!--<splash src="res/screen/android/screen-xhdpi-landscape.png" platform="android" density="land-xhdpi" />-->
  <splash src="res/screen/android/screen-xxhdpi-portrait.png" platform="android" density="xxhdpi" />
  <!--<splash src="res/screen/android/screen-xxhdpi-landscape.png" platform="android" density="land-xxhdpi" />-->
  
  <!-- iOS App Launch Icons -->
  <!-- iPhone 6 / 6+ -->
  <icon src="res/icon/ios/Icon-60@3x.png" platform="ios" width="180" height="180" />

  <!-- iPhone / iPod Touch  -->
  <icon src="res/icon/ios/Icon-60.png" platform="ios" width="60" height="60" />
  <icon src="res/icon/ios/Icon-60@2x.png" platform="ios" width="120" height="120" />

  <!-- iPad -->
  <icon src="res/icon/ios/Icon-76.png" platform="ios" width="76" height="76" />
  <icon src="res/icon/ios/Icon-76@2x.png" platform="ios" width="152" height="152" />

  <!-- Spotlight Icon -->
  <icon src="res/icon/ios/Icon-40.png" platform="ios" width="40" height="40" />
  <icon src="res/icon/ios/Icon-40@2x.png" platform="ios" width="80" height="80" />
  
  <!-- iPhone / iPod Touch -->
  <icon src="res/icon/ios/Icon.png" platform="ios" width="57" height="57" />
  <icon src="res/icon/ios/Icon@2x.png" platform="ios" width="114" height="114" />

  <!-- iPad -->
  <icon src="res/icon/ios/Icon-72.png" platform="ios" width="72" height="72" />
  <icon src="res/icon/ios/Icon-72@2x.png" platform="ios" width="144" height="144" />

  <!-- iPhone Spotlight and Settings Icon -->
  <icon src="res/icon/ios/Icon-small.png" platform="ios" width="29" height="29" />
  <icon src="res/icon/ios/Icon-small@2x.png" platform="ios" width="58" height="58" />

  <!-- iPad Spotlight and Settings Icon -->
  <icon src="res/icon/ios/Icon-50.png" platform="ios" width="50" height="50" />
  <icon src="res/icon/ios/Icon-50@2x.png" platform="ios" width="100" height="100" />
  
  <!-- iOS Splash Pages -->
  <!-- iPhone and iPod touch -->
  <splash src="res/screen/ios/Default.png" platform="ios" width="320" height="480" />
  <splash src="res/screen/ios/Default@2x.png" platform="ios" width="640" height="960" />

  <!-- iPhone 5 / iPod Touch (5th Generation) -->
  <splash src="res/screen/ios/Default-568h@2x_iphone.png" platform="ios" width="640" height="1136" />

  <!-- iPhone 6 -->
  <splash src="res/screen/ios/Default-667h@2x.png" platform="ios" width="750" height="1334" />
  <splash src="res/screen/ios/Default-Portrait-736h@3x.png" platform="ios" width="1242" height="2208" />
  <splash src="res/screen/ios/Default-Landscape-736h@3x.png" platform="ios" width="2208" height="1242" />
  
  <!-- iPad -->
  <splash src="res/screen/ios/Default-Portrait.png" platform="ios" width="768" height="1024" />
  <splash src="res/screen/ios/Default-Landscape.png" platform="ios" width="1024" height="768" />

  <splash src="res/screen/ios/Default-Portrait@2X_ipad.png" platform="ios" width="1536" height="2048" />
  <splash src="res/screen/ios/Default-Landscape@2X_ipad.png" platform="ios" width="2048" height="1536" />

  <config-file platform="ios" parent="UIStatusBarHidden" overwrite="true">
    <false/>
  </config-file>
  <config-file platform="ios" parent="UIViewControllerBasedStatusBarAppearance" overwrite="true">
    <true/>
  </config-file>

  <!-- Update the native manifest file specifying the .birm extension -->
  <config-file platform="android" parent="/manifest">
    <application android:debuggable="true" />
  </config-file>

  <config-file platform="android" parent="/manifest/application/activity" mode="add">
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    
    <intent-filter>
      <action android:name="android.intent.action.MAIN" />
      <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
    
    <!--Opens file from local storage for some Android devices-->
    <intent-filter>
      <action android:name="android.intent.action.VIEW" />
      <category android:name="android.intent.category.DEFAULT" />
      <category android:name="android.intent.category.BROWSABLE" />
      <data android:scheme="file" android:host="*" android:pathPattern=".*\\.birm" android:mimeType="*/*" />
    </intent-filter>

    <!--native email client open attachment directly in email-->
    <intent-filter>
      <action android:name="android.intent.action.SEND" />
      <category android:name="android.intent.category.DEFAULT" />
      <category android:name="android.intent.category.BROWSABLE" />
      <data android:scheme="file" android:host="*" android:pathPattern=".*\\.birm" android:mimeType="*/*" />
    </intent-filter>

    <!--open attachment directly in yahoo-->
    <intent-filter>
      <action android:name="android.intent.action.VIEW" />
      <category android:name="android.intent.category.DEFAULT" />
      <category android:name="android.intent.category.BROWSABLE" />
      <data android:pathPattern=".*\\.birm" android:mimeType="application/birm"/>
    </intent-filter>
   
    <!--Opens file from local storage for some Android devices. Opens BIRM but will not download-->
    <!--<intent-filter>
      <action android:name="android.intent.action.VIEW" />
      <action android:name="android.intent.action.OPEN_DOCUMENT" />
      <category android:name="android.intent.category.DEFAULT" />
      <category android:name="android.intent.category.BROWSABLE" />
      <data android:scheme="file" android:host="*" android:pathPattern=".*\\.birm" android:mimeType="*/*" />
    </intent-filter>-->

    <!--Opens file from local storage for some Android devices. -->
    <intent-filter>
      <action android:name="android.intent.action.VIEW" />
      <action android:name="android.intent.action.OPEN_DOCUMENT" />
      <category android:name="android.intent.category.DEFAULT" />
      <category android:name="android.intent.category.BROWSABLE" />
      <data android:scheme="content" android:host="*" android:pathPattern=".*\\.birm" android:mimeType="*/*" />
    </intent-filter>
    
    <!--opens attachment directly in gmail. Opens BIRM but doesn't download notes. TODO. Fix-->
    <intent-filter>
      <action android:name="android.intent.action.VIEW" />
      <category android:name="android.intent.category.DEFAULT" />
      <category android:name="android.intent.category.BROWSABLE" />
      <data android.scheme="file" android:pathPattern=".*\\.birm" android:mimeType="application/octet-stream"/>
    </intent-filter>
   
  </config-file>
    

  <config-file platform="ios" parent="CFBundleDocumentTypes" mode="add">
    <array>
      <dict>
        <key>CFBundleTypeIconFiles</key>
        <array>
          <string>birm x 57</string>
        </array>
        <key>CFBundleTypeName</key>
        <string>birm</string>
        <key>CFBundleTypeRole</key>
        <string>Editor</string>
        <key>LSHandlerRank</key>
        <string>Owner</string>
        <key>LSItemContentTypes</key>
        <array>
          <string>com.ideationinc.birm.birm</string>
          <!-- Change to com.ideationinc.birm.birm -->
        </array>
      </dict>
    </array>
  </config-file>

  <config-file platform="ios" parent="CFBundleURLTypes" mode="add">
    <array>
      <dict>
        <key>CFBundleTypeRole</key>
        <string>Editor</string>
        <key>CFBundleURLIconFile</key>
        <string>57 icon</string>
        <key>CFBundleURLName</key>
        <string>com.ideationinc.birm.birm</string>
        <!-- Change to com.ideationinc.birm.birm -->
        <key>CFBundleURLSchemes</key>
        <array>
          <string>birm</string>
        </array>
      </dict>
    </array>
  </config-file>

  <config-file platform="ios" parent="UTExportedTypeDeclarations" mode="add">
    <array>
      <dict>
        <key>UTTypeConformsTo</key>
        <array>
          <string>public.data</string>
        </array>
        <key>UTTypeDescription</key>
        <string>BIRM Backup</string>
        <key>UTTypeIdentifier</key>
        <string>com.ideationinc.birm.birm</string>
        <!-- Change to com.ideationinc.birm.birm -->
        <key>UTTypeSize320IconFile</key>
        <string>birm x 114</string>
        <key>UTTypeSize64IconFile</key>
        <string>birm x 57</string>
        <key>UTTypeTagSpecification</key>
        <dict>
          <key>public.filename-extension</key>
          <string>birm</string>
          <key>public.mime-type</key>
          <string>application/birm</string>
        </dict>
      </dict>
    </array>
  </config-file>

  
  <!-- Added the following intents to support the removal of whitelist code from base cordova to a plugin -->
  <!-- Whitelist configuration. Refer to https://cordova.apache.org/docs/en/edge/guide_appdev_whitelist_index.md.html -->
  <plugin name="cordova-plugin-whitelist" spec="~1.3.0" />
  <allow-intent href="http://*/*" />
  <allow-intent href="https://*/*" />
  <allow-intent href="file://*/*" />  
  <allow-intent href="tel:*" />
  <allow-intent href="sms:*" />
  <allow-intent href="mailto:*" />
  <allow-intent href="geo:*" />
  <platform name="android">
    <allow-intent href="market:*" />
  </platform>
  <platform name="ios">
    <allow-intent href="itms:*" />
    <allow-intent href="itms-apps:*" />
  </platform>

</widget>